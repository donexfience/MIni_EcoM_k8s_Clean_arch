"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const cart_controller_1 = require("../controller/cart-controller");
const cartRepository_1 = require("../repository/cartRepository");
const cart_service_1 = require("../services/cart-service");
const setCurrentUser_1 = require("../middleware/setCurrentUser");
const requireAuth_1 = require("../middleware/requireAuth");
const blockOrUnblcok_1 = require("../middleware/blockOrUnblcok");
const router = (0, express_1.Router)();
const cartRepositoroy = new cartRepository_1.cartRepository();
const cartService = new cart_service_1.CartService(cartRepositoroy);
const cartController = new cart_controller_1.CartController(cartService);
router.post("/cart", setCurrentUser_1.setCurrentUser, requireAuth_1.requrieAuth, blockOrUnblcok_1.isBlockedUser, (req, res) => {
    cartController.addItemToCart(req, res);
});
router.get("/cart/:userId", setCurrentUser_1.setCurrentUser, requireAuth_1.requrieAuth, blockOrUnblcok_1.isBlockedUser, (req, res) => cartController.getCart(req, res));
router.delete("/cart/:userId", setCurrentUser_1.setCurrentUser, blockOrUnblcok_1.isBlockedUser, requireAuth_1.requrieAuth, (req, res) => cartController.clearCart(req, res));
router.delete("/cart/:userId/item", setCurrentUser_1.setCurrentUser, requireAuth_1.requrieAuth, blockOrUnblcok_1.isBlockedUser, (req, res) => cartController.removeItemFromCart(req, res));
exports.default = router;
